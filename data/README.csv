MarqBot Workbook — Authoring Reference,Unnamed: 1,Unnamed: 2
,,
,,
Sheet,Primary Key,Foreign Keys / Notes
courses,course_code,Stand-alone catalog identity. One row per course.
programs,program_id,kind = 'major' or 'track'. Tracks reference parent_major_id -> programs.program_id.
buckets,"(program_id, bucket_id)",Parent requirement families. program_id -> programs.program_id.
sub_buckets,"(program_id, sub_bucket_id)",Allocatable requirement units. bucket_id -> buckets.bucket_id.
courses_all_buckets,"(program_id, sub_bucket_id, course_code)",Maps course to sub-bucket. sub_bucket_id -> sub_buckets.sub_bucket_id; course_code -> courses.course_code.
course_prereqs,"(course_code, prereq_type)",Hard/soft/concurrent prerequisites. course_code -> courses.course_code.
course_offerings,"(course_code, term_code)",Per-term offering history. course_code -> courses.course_code.
course_equivalencies,"(equiv_group_id, course_code)",Global or program-scoped equivalency groups. Optional program_scope -> programs.program_id.
double_count_policy,"(program_id, node_type_a, node_id_a, node_type_b, node_id_b)",Explicit allow/deny for cross-bucket credit overlap. node_ids reference bucket_id or sub_bucket_id.
,,
,,
"courses: course_code, course_name, credits",,
"programs: program_id, program_label, kind, parent_major_id, active",,
"buckets: program_id, bucket_id, bucket_label, priority, track_required, active",,
"sub_buckets: program_id, bucket_id, sub_bucket_id, sub_bucket_label, courses_required, priority, role",,
"courses_all_buckets: program_id, sub_bucket_id, course_code",,
"course_prereqs: course_code, prerequisites (hard), prereq_warnings (soft), concurrent_with, min_standing",,
"course_offerings: course_code, term_code, offered (bool), confidence (high/medium/low/unknown)",,
"course_equivalencies: equiv_group_id, course_code, notes [optional: program_scope]",,
"double_count_policy: program_id, node_type_a, node_id_a, node_type_b, node_id_b, allow_double_count, reason",,
,,
,,
Resolution order (highest wins):,,
  1. sub_bucket <-> sub_bucket explicit row,,
  2. bucket <-> bucket explicit row (applies to all child sub-buckets),,
  3. Hierarchy default: same parent bucket => DENY; different parent => ALLOW,,
,,
Example: Allow FINA 4020 to satisfy both FIN_CHOOSE_1 and FIN_CHOOSE_2:,,
"  program_id=FIN_MAJOR, node_type_a=sub_bucket, node_id_a=FIN_CHOOSE_1,",,
"  node_type_b=sub_bucket, node_id_b=FIN_CHOOSE_2, allow_double_count=1",,
,,
Example: Allow FIN_REQ <-> track buckets (at bucket level):,,
"  program_id=FIN_MAJOR, node_type_a=bucket, node_id_a=FIN_REQ,",,
"  node_type_b=bucket, node_id_b=CB_CORE, allow_double_count=1",,
,,
,,
"1. Add a row to 'courses' (course_code, course_name, credits, level).",,
2. Add a row to 'course_prereqs' if it has prerequisites.,,
3. Add a row to 'course_offerings' for each term it was/is offered.,,
4. Add rows to 'courses_all_buckets' mapping it to the appropriate sub-buckets.,,
5. Run: python scripts/validate_track.py --all,,
6. Run: python -m pytest tests/backend_tests/ -q,,
,,
,,
"1. Add a row to 'programs': kind=track, parent_major_id=<major>.",,
2. Add rows to 'buckets' for new bucket families (if needed).,,
3. Add rows to 'sub_buckets' for each requirement unit.,,
4. Add rows to 'courses_all_buckets' mapping courses.,,
5. Add rows to 'double_count_policy' for any cross-bucket overlap.,,
6. Set active=0 until validated; flip to active=1 to publish.,,
7. Run: python scripts/validate_track.py --all,,
8. Run: python -m pytest tests/backend_tests/ -q,,
,,
,,
"Same as track but kind=major, parent_major_id stays empty.",,
,,
,,
Validate all active programs:   python scripts/validate_track.py --all,,
Validate one program:           python scripts/validate_track.py --track FIN_MAJOR,,
Run all backend tests:          python -m pytest tests/backend_tests/ -q,,
Check for deprecated columns:   python scripts/migrate_schema.py --clean --dry-run --path marquette_courses_full.xlsx,,
,,
,,
[ ] python -m pytest -q  (all tests pass),,
[ ] python scripts/validate_track.py --all  (all programs pass),,
[ ] Manual smoke: /programs returns expected active options,,
[ ] Manual smoke: /recommend returns coherent results for baseline student,,
,,
,,
BCC_FOUNDATION  — courses_required=15 (includes LEAD courses),,
BCC_ETHICS      — Ethics requirement,,
BCC_ENHANCE     — Enhancement electives,,
BCC_ANALYTICS   — Analytics requirement,,
,,
,,
- sub_buckets in the same parent bucket are SIBLING sub-buckets.,,
- Siblings do NOT double-count by default (same-family hierarchy deny).,,
"- To allow overlap between siblings, add an explicit double_count_policy row.",,
- OR-option courses: model with course_equivalencies (equiv_group: constraint).,,
"- Restriction language (major-only, consent): use prereq_soft column in course_prereqs.",,
"- offering_confidence: high=taught every year, medium=occasional, low=rare, unknown=unclear.",,
